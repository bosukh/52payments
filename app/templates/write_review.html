<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" type='text/css' href="{{ url_for('static', filename='css/rating.css') }}">

  <div class="search-box">
    <form action="" method="post" name="search-box-form" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <div id="search-box-checks" class="search-checkbox-row'">
          <div class="rating rating-star">
            <span class='rating-star' id='rating_5'>☆</span>
            <span class='rating-star' id='rating_4'>☆</span>
            <span class='rating-star' id='rating_3'>☆</span>
            <span class='rating-star' id='rating_2'>☆</span>
            <span class='rating-star' id='rating_1'>☆</span>
          </div>
          {% for field in form %}
            {% if field.name != 'csrf_token'%}
              <div id = {{field.label.text + '_text'}} class="checkbox">
                {{ field }}
                {{ field.label.text }}
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="button-wrapper">
          <button id='search-button' class='button' type="submit" name="button">Submit</button>
        </div>
    </form>
  </div>

  <script type="text/javascript">
    var rating_input = document.getElementById('rating');
    var rating_text = document.getElementById('rating_text');
    rating_input.value = 0;
    var ratings = []
    for (var i=1; i< 6;i++){
      ratings.push(document.getElementById('rating_'+ i));
    };
    for (var i = 0; i < ratings.length; i++){
      var rating = ratings[i];
      rating.addEventListener('click', (function(rating, i){
        return function() {
          var rating_num = i+1;
          rating_input.value = rating_num;
          rating_text.innerHTML = rating_num;
          for (var j = 0; j < rating_num; j++){
            ratings[j].innerHTML = '★';
          };
          for (var q = rating_num; q < 5 ; q++){
            ratings[q].innerHTML = '☆';
          };
          };
      })(rating, i));
    }
  </script>
{% endblock %}
