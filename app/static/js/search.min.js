function init_search_box(){init_vars(),toggle_clear_all_btn(),fill_items(types[current_type],items,0)}function init_vars(){clear_all_btn=document.getElementById("clear-all"),items=document.getElementById("items"),selected_items=document.getElementById("selected-items"),search_criteria=document.getElementById("search_criteria"),types=get_criteria_list(),selected_item_list=get_selected_item_list(),current_type||(current_type="Pricing Method")}function get_criteria_list(){if(sessionStorage.getItem("Business Types"))var a=sessionStorage.getItem("Business Types").split(",");else var a=["Retail","Restaurant","E-Commerce","Healthcare/Medical","Mobile","Professional/Personal Services","Non-Profit","High-Risk","High-Volume","Other"];if(sessionStorage.getItem("Complimentary Services"))var b=sessionStorage.getItem("Complimentary Services").split(",");else var b=["Marketing","Analytics","Recurling Bill","Chargeback","Security","Other"];if(sessionStorage.getItem("Equipments"))var c=sessionStorage.getItem("Equipments").split(",");else var c=["Verifone","Ingenico","Other"];if(sessionStorage.getItem("Pricing Method"))var d=sessionStorage.getItem("Pricing Method").split(",");else var d=["Tiered","Interchange Plus","Flat","Custom"];return types={"Business Types":a,"Complimentary Services":b,Equipments:c,"Pricing Method":d}}function select_items_title(a){current_type=a.innerHTML;for(var b=document.getElementsByClassName("items-title"),c=0;c<b.length;c++)b[c].className="items-title";a.className="items-title selected";for(var d=items.childNodes.length,c=1;c<d;c++)items.childNodes[1].remove();fill_items(types[current_type],items,0)}function fill_items(a,b,c){for(var d=0;d<a.length;d++){var e=document.createElement("button");e.className="item",c?(e.className="item selected-item",e.onclick=function(){deselect(this)},e.innerHTML=a[d]+" x"):(e.setAttribute("id",a[d]),e.onclick=function(){select(this)},e.innerHTML=a[d]),b.appendChild(e)}}function select(a){pop(types[current_type],a.innerHTML),sessionStorage.setItem(current_type,types[current_type]),selected_item_list.push(current_type+": "+a.innerHTML),sessionStorage.setItem("selected_item_list",selected_item_list),fill_items([current_type+": "+a.innerHTML],selected_items,1),a.remove(),document.getElementById("chosen-title").style.opacity=1,search_criteria.value=selected_item_list.join(","),toggle_clear_all_btn()}function deselect(a){var b=a.innerHTML.trim(),c=b.split(": ")[0],d=b.split(": ")[1].split(" x")[0];pop(selected_item_list,b),sessionStorage.setItem("selected_item_list",selected_item_list),types[c].push(d),sessionStorage.setItem(current_type,types[current_type]),types[current_type].includes(d)&&fill_items([d],items,0),a.remove(),0==selected_item_list.length&&(document.getElementById("chosen-title").style.opacity=0),search_criteria.value=selected_item_list.join(","),toggle_clear_all_btn()}function get_selected_item_list(){return sessionStorage.getItem("selected_item_list")?(selected_item_list=sessionStorage.getItem("selected_item_list").split(","),document.getElementById("chosen-title").style.opacity=1,fill_items(selected_item_list,selected_items,1),search_criteria.value=selected_item_list.join(",")):selected_item_list=[],selected_item_list}function toggle_clear_all_btn(){selected_item_list&&0!=selected_item_list.length?clear_all_btn.style="display:block;":clear_all_btn.style="display:none;"}function get_search_result_base(a){document.getElementById("loader").style="display: block;";var b=function(){if(document.getElementById("search-result"))document.getElementById("search-result").innerHTML=d.responseText;else{var a=document.createElement("div");a.setAttribute("id","search-result"),a.innerHTML=d.responseText,document.getElementById("content-container").appendChild(a)}document.getElementById("loader").style="display: none;",add_cont_reading_btn()},c="/search_results?search_criteria="+encodeURIComponent(search_criteria.value),d=create_xhr("GET",c,b);d.send(),a&&a()}function clear_search_criteria(){sessionStorage.clear(),search_criteria.value="",items.innerHTML="",selected_items.innerHTML="",document.getElementById("chosen-title").style.opacity=0,init_search_box()}function get_search_result(){get_search_result_base(function(){featured_title.remove(),featured.remove()})}var types,search_criteria,current_type,items,selected_items,selected_item_list,clear_all_btn,featured_title=document.getElementById("featured-title"),featured=document.getElementById("featured-companies");init_search_box(),"undefined"!=typeof search_criteria&""!=search_criteria.value?get_search_result():add_cont_reading_btn();
